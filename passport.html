<!DOCTYPE html>
<html>
<title>HvZ QR Code Passport</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<style>
body {font-family: Arial, Helvetica, sans-serif;}

#myImg {
  cursor: pointer;
  transition: 0.3s;
  object-fit: cover;
  width: 200px;
  height: 200px;
  overflow: hidden;
  filter: gray; 
  -webkit-filter: grayscale(1); 
  filter: grayscale(1);
}

#myImg:hover {opacity: 0.7;}


</style>

<body>

<div class="w3-container w3-orange w3-center" style="margin-bottom: 35px">
  <h1 id="log">HvZ Passport</h1> 
  <p>Brains!</p> 
</div>

<div id="lockedModal" class="w3-modal">
  <div class="w3-modal-content">
    <div class="w3-container w3-center">
      <span onclick="document.getElementById('lockedModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
      <p>Locked!</p>
    </div>
  </div>
</div>

<div id="lathropModal" class="w3-modal">
  <div class="w3-modal-content">
    <div class="w3-container">
      <span onclick="document.getElementById('lathropModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
      <p>Address</p>
      <p>518 Memorial Way Stanford, CA 94305</p>
    </div>
  </div>
</div>

<div id="mcmurtryModal" class="w3-modal">
  <div class="w3-modal-content">
    <div class="w3-container">
      <span onclick="document.getElementById('mcmurtryModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
      <p>McMurtry!</p>
      <p>doooodooodooo</p>
    </div>
  </div>
</div>

<div id="cantorModal" class="w3-modal">
  <div class="w3-modal-content">
    <div class="w3-container">
      <span onclick="document.getElementById('cantorModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
      <p>Serving the Stanford campus, the Bay Area community, and visitors from around the world, the Cantor Arts Center provides an outstanding cultural experience for visitors of all ages. Founded when the university opened in 1891, the historic museum was expanded and renamed in 1999 for lead donors Iris and B. Gerald Cantor. The Cantorâ€™s collection spans 5,000 years and includes more than 38,000 works of art from around the globe. These include our renowned collection of Rodin bronze sculptures, which are displayed inside the museum as well as in our outdoor Rodin Sculpture Garden. With 24 galleries and more than 15 special exhibitions each year, the Cantor is an established resource for teaching and research on campus. Free admission, tours, lectures, and family activities make the Cantor one of the most visited university art museums in the country.</p>
    </div>
  </div>
</div>

<div class="w3-row-padding w3-center">
  <div class="w3-col s6">
      <img class="w3-image w3-round-xxlarge lathrop" id="myImg" src="brain_lock.png" onclick="document.getElementById('lockedModal').style.display='block'">
    <h2>Lathrop</h2>
  </div>

  <div class="w3-col s6">
      <img class="w3-image w3-round-xxlarge mcmurtry" id="myImg" src="brain_lock.png" onclick="document.getElementById('lockedModal').style.display='block'">
    <h2>McMurtry</h2>
  </div>

  <div class="w3-col s6">
      <img class="w3-image w3-round-xxlarge cantor" id="myImg" src="brain_lock.png" onclick="document.getElementById('lockedModal').style.display='block'">
    <h2>Cantor</h2>
  </div>
</div>


<script language="JavaScript">

  var stamps = ["lathrop", "mcmurtry", "cantor"];
  var quiz = [true, false, true];

  var questions = {
    "lathrop": [{ 
        question: 'Brains? (the answer is yes)',
        answer: 'yes',
        affirm: 'Yay! You got it right!',
        rebuttal: 'Try again.'
    },
    {
        question: 'The answe is no.',
        answer: 'no',
        affirm: 'Good job!',
        rebuttal: 'Try again.'
    }],
    "cantor": [{
      question: 'First Fridays? (the answer is yes)',
      answer: 'yes',
      affirm: 'Yay! You got it right!',
      rebuttal: 'Try again.'
    }]
  };

  function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }

  function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
     var c = ca[i];
     while (c.charAt(0) == ' ') {
       c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
       return c.substring(name.length, c.length);
      }
    }
   return "";
  }

  function stamp()
  {
    var parameters = location.search.substring(1).split("&");

    var temp = parameters[0].split("=");
    l = decodeURI(temp[1]);

    if(decodeURI(temp[0])=="stamp"){
      setCookie(l, "seen", 1);
    }    
  }

  //https://stackoverflow.com/questions/19372498/please-help-writing-a-javascript-quiz-using-prompt-and-multiple-if-then-statemen
  function q(name){
    for (var i = 0, l = questions[name].length; i < l; i++) {
      answer = prompt(questions[name][i].question);

      // I do not support manipulating a loop counter mid-loop, but it's for an example.
      if (answer !== questions[name][i].answer) {
          alert(questions[name][i].rebuttal);
          i--;
          return;
      } else {
          alert(questions[name][i].affirm);
      }
    }
    //passed
    setCookie(name, "completed", 1);
    document.getElementsByClassName(name)[0].style.filter = "none";
    document.getElementsByClassName(name)[0].setAttribute("style","-webkit-filter:grayscale(" + 0 + "%)");
    document.getElementsByClassName(name)[0].setAttribute('onclick','document.getElementById(\'' + name + "Modal\').style.display=\'block\';");
  }

  function open(){
    var arraylength = stamps.length;
    
    for(var i = 0; i < arraylength; i++){
      var name = stamps[i];
      var c = getCookie(name);
      if(c == "seen" && quiz[i]){
        document.getElementsByClassName(name)[0].src = stamps[i] + ".jpg";
        document.getElementsByClassName(name)[0].setAttribute('onclick', 'q(\'' + name + '\');');
      }
      if(c == "completed" || (c == "seen" && !quiz[i])){
        document.getElementsByClassName(name)[0].src = stamps[i] + ".jpg";
        document.getElementsByClassName(name)[0].style.filter = "none";
        document.getElementsByClassName(name)[0].setAttribute("style","-webkit-filter:grayscale(" + 0 + "%)");
        document.getElementsByClassName(name)[0].setAttribute('onclick','document.getElementById(\'' + name + "Modal\').style.display=\'block\';");
      }
    }  
  }
stamp();
open();

</script>


</body>
</html>
